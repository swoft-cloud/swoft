version: '3'

services:
    swoft:
       image: swoft/swoft:latest
#       build: ./
       ports:
         - "80:80"
       volumes:
         - ./:/var/www/swoft
       stdin_open: true 
       tty: true
       privileged: true
#       command: php /var/www/swoft/bin/swoft start
       entrypoint:
          - sh
          - -c
          - |
            composer install --no-dev
            composer dump-autoload
            composer clearcache
            php /var/www/swoft/bin/swoft start
